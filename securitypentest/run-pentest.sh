#!/usr/bin/env bash
set -e

container="securityscanner"
swagger_target="/local/src/main/resources/swagger/api-docs.yaml"
port="8090"
freport="freport.html"
areport="areport.html"
apidef="https://sam.dsde-dev.broadinstitute.org/api-docs.yaml"

fscan() {
    docker exec $container zap-full-scan.py -P $port -a -d -t http://localhost:8080 -r $freport
    docker ps -a 
    ls -al
    cat $freport
}

sscan() {
    docker start $container
    docker exec $container zap-api-scan.py -t $apidef -f openapi -r $areport

    cat $areport
}

sscan
